{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Product } from 'src/app/data/product';\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/Services/product-service.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../Services/userservices.service\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../admin/alert/alert.component\";\nfunction CreateProductComponent_app_alert_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-alert\", 33);\n    i0.ɵɵlistener(\"onClose\", function CreateProductComponent_app_alert_1_Template_app_alert_onClose_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onAlertClose());\n    });\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Info!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"This alert box could indicate a neutral change \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"type\", \"alert-warning\");\n  }\n}\nfunction CreateProductComponent_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtext(1, \" The Name field is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateProductComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtext(1, \" The field Price must be a number between 1 and 2147483647. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateProductComponent_img_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 35);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r3.imagePathList[0], i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CreateProductComponent_option_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r10.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cat_r10.CategoryName);\n  }\n}\nfunction CreateProductComponent_span_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtext(1, \" The Category Type field is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateProductComponent_option_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const app_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", app_r11.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(app_r11.ApplicationName);\n  }\n}\nfunction CreateProductComponent_span_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtext(1, \" The Application Type field is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CreateProductComponent {\n  constructor(formBuilder, productServiceService, router, userserviceService, http // Inject HttpClient module here\n  ) {\n    this.formBuilder = formBuilder;\n    this.productServiceService = productServiceService;\n    this.router = router;\n    this.userserviceService = userserviceService;\n    this.http = http;\n    this.id = 0;\n    this.imagePathList = [];\n    this.Category = [];\n    this.application = [];\n    this.productname = \"\";\n    this.productlist = [];\n    this.loading = false;\n    this.isAlert = false;\n    if (!userserviceService.getuserloginstatus() && !userserviceService.isadmin) {\n      router.navigate(['/Login']);\n    }\n    this.productlist = productServiceService.getProduct();\n    this.Category = productServiceService.getcategory();\n    this.application = productServiceService.getapplication();\n  }\n  ngOnInit() {\n    this.productForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      price: ['', [Validators.required, Validators.min(1), Validators.max(2147483647)]],\n      shortDesc: [''],\n      description: [''],\n      categoryId: ['', Validators.required],\n      applicationTypeId: ['', Validators.required]\n    });\n  }\n  onFileChange(event) {\n    this.file = event.target.files[0];\n  }\n  OnUploadFile() {\n    console.log('upload.....');\n    if (this.file) {\n      const formData = new FormData();\n      formData.append('file', this.file);\n      const headers = new HttpHeaders();\n      headers.append('Content-Type', 'multipart/form-data');\n      this.http.post('assets', formData, {\n        headers\n      }).subscribe(response => {\n        console.log('File uploaded successfully');\n        // Handle the response if required\n      }, error => {\n        console.error('Error uploading file:', error);\n        // Handle the error if required\n      });\n    }\n  }\n\n  onSubmit() {\n    if (this.productForm.valid) {\n      const productName = this.productForm.controls['name'].value;\n      const isDuplicate = this.productlist.some(product => product.Name?.toLowerCase() === productName.toLowerCase());\n      if (isDuplicate) {\n        this.onAlertOpen();\n        setTimeout(() => {\n          this.onAlertClose();\n        }, 3000);\n      } else {\n        this.OnUploadFile(); // Upload the file before adding the product\n        const product = new Product(this.id, productName, this.productForm.controls['shortDesc'].value, this.productForm.controls['price'].value, this.imagePathList[0], this.productForm.controls['categoryId'].value, this.productForm.controls['applicationTypeId'].value, this.productForm.controls['description'].value);\n        this.productServiceService.Addproduct(product);\n        console.log(this.productServiceService.getProduct());\n        this.router.navigate(['/displayproductlist']);\n      }\n    }\n  }\n  onAlertClose() {\n    this.isAlert = false;\n  }\n  onAlertOpen() {\n    this.isAlert = true;\n  }\n}\nCreateProductComponent.ɵfac = function CreateProductComponent_Factory(t) {\n  return new (t || CreateProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProductServiceService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.UserserviceService), i0.ɵɵdirectiveInject(i5.HttpClient));\n};\nCreateProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateProductComponent,\n  selectors: [[\"app-create-product\"]],\n  decls: 82,\n  vars: 11,\n  consts: [[1, \"container\", \"m-4\"], [3, \"type\", \"onClose\", 4, \"ngif\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"border\", \"p-3\"], [1, \"form-group\", \"row\"], [1, \"text-center\", \"text-info\", \"pl-3\"], [1, \"row\"], [1, \"col-8\"], [1, \"col-4\"], [1, \"text-danger\"], [\"for\", \"Product_Name\"], [\"type\", \"text\", \"id\", \"Product_Name\", \"formControlName\", \"name\", 1, \"form-control\"], [\"class\", \"text-danger field-validation-valid\", 4, \"ngIf\"], [\"for\", \"Product_Price\"], [\"type\", \"text\", \"id\", \"Product_Price\", \"formControlName\", \"price\", 1, \"form-control\"], [\"for\", \"Product_ShortDesc\"], [\"type\", \"text\", \"id\", \"Product_ShortDesc\", \"formControlName\", \"shortDesc\", 1, \"form-control\"], [\"for\", \"Product_Description\"], [\"id\", \"Product_Description\", \"formControlName\", \"description\", 1, \"form-control\", \"summernote\"], [\"for\", \"Product_Image\"], [\"type\", \"file\", \"name\", \"files\", \"id\", \"uploadBox\", \"multiple\", \"\", 1, \"form-control\", 3, \"change\"], [\"alt\", \"Selected Image\", \"style\", \"max-width: 200px; max-height: 200px;\", 3, \"src\", 4, \"ngIf\"], [\"for\", \"Product_CategoryId\"], [\"id\", \"Product_CategoryId\", \"formControlName\", \"categoryId\", 1, \"form-control\"], [\"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"Product_ApplicationTypeId\"], [\"id\", \"Product_ApplicationTypeId\", \"formControlName\", \"applicationTypeId\", 1, \"form-control\"], [1, \"col-8\", \"offset-4\", \"row\"], [1, \"col\"], [\"type\", \"submit\", \"value\", \"Create\", 1, \"btn\", \"btn-primary\", \"w-100\", 3, \"disabled\"], [1, \"btn\", \"btn-success\", \"w-100\", 3, \"routerLink\"], [1, \"fas\", \"fa-sign-out-alt\"], [3, \"type\", \"onClose\"], [1, \"text-danger\", \"field-validation-valid\"], [\"alt\", \"Selected Image\", 2, \"max-width\", \"200px\", \"max-height\", \"200px\", 3, \"src\"], [3, \"value\"]],\n  template: function CreateProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, CreateProductComponent_app_alert_1_Template, 4, 1, \"app-alert\", 1);\n      i0.ɵɵelementStart(2, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function CreateProductComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"h2\", 5);\n      i0.ɵɵtext(6, \"Create Product\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 4)(10, \"div\", 8);\n      i0.ɵɵelement(11, \"p\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"div\", 7);\n      i0.ɵɵelementStart(13, \"div\", 8)(14, \"label\", 10);\n      i0.ɵɵtext(15, \"Name\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵelement(17, \"input\", 11);\n      i0.ɵɵtemplate(18, CreateProductComponent_span_18_Template, 2, 0, \"span\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(19, \"br\");\n      i0.ɵɵelementStart(20, \"div\", 4)(21, \"div\", 8)(22, \"label\", 13);\n      i0.ɵɵtext(23, \"Price\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 7);\n      i0.ɵɵelement(25, \"input\", 14);\n      i0.ɵɵtemplate(26, CreateProductComponent_span_26_Template, 2, 0, \"span\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(27, \"br\");\n      i0.ɵɵelementStart(28, \"div\", 4)(29, \"div\", 8)(30, \"label\", 15);\n      i0.ɵɵtext(31, \"ShortDesc\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 7);\n      i0.ɵɵelement(33, \"input\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(34, \"br\");\n      i0.ɵɵelementStart(35, \"div\", 4)(36, \"div\", 8)(37, \"label\", 17);\n      i0.ɵɵtext(38, \"Description\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"div\", 7);\n      i0.ɵɵelement(40, \"textarea\", 18);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(41, \"br\");\n      i0.ɵɵelementStart(42, \"div\", 4)(43, \"div\", 8)(44, \"label\", 19);\n      i0.ɵɵtext(45, \"Image\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(46, \"div\", 7)(47, \"input\", 20);\n      i0.ɵɵlistener(\"change\", function CreateProductComponent_Template_input_change_47_listener($event) {\n        return ctx.onFileChange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(48, \"br\");\n      i0.ɵɵtemplate(49, CreateProductComponent_img_49_Template, 1, 1, \"img\", 21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(50, \"br\");\n      i0.ɵɵelementStart(51, \"div\", 4)(52, \"div\", 8)(53, \"label\", 22);\n      i0.ɵɵtext(54, \"Category Type\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(55, \"div\", 7)(56, \"select\", 23)(57, \"option\", 24);\n      i0.ɵɵtext(58, \"--Select Category--\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(59, CreateProductComponent_option_59_Template, 2, 2, \"option\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(60, CreateProductComponent_span_60_Template, 2, 0, \"span\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(61, \"br\");\n      i0.ɵɵelementStart(62, \"div\", 4)(63, \"div\", 8)(64, \"label\", 26);\n      i0.ɵɵtext(65, \"Application Type\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(66, \"div\", 7)(67, \"select\", 27)(68, \"option\", 24);\n      i0.ɵɵtext(69, \"--Select Application Type--\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(70, CreateProductComponent_option_70_Template, 2, 2, \"option\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(71, CreateProductComponent_span_71_Template, 2, 0, \"span\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(72, \"br\");\n      i0.ɵɵelementStart(73, \"div\", 4)(74, \"div\", 28)(75, \"div\", 29);\n      i0.ɵɵelement(76, \"input\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(77, \"div\", 29)(78, \"a\", 31);\n      i0.ɵɵelement(79, \"i\", 32);\n      i0.ɵɵtext(80, \" Back \");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelement(81, \"div\", 8);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_6_0;\n      let tmp_8_0;\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngif\", ctx.isAlert);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.productForm.get(\"name\")) == null ? null : tmp_2_0.invalid) && (((tmp_2_0 = ctx.productForm.get(\"name\")) == null ? null : tmp_2_0.dirty) || ((tmp_2_0 = ctx.productForm.get(\"name\")) == null ? null : tmp_2_0.touched)));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.productForm.get(\"price\")) == null ? null : tmp_3_0.invalid) && (((tmp_3_0 = ctx.productForm.get(\"price\")) == null ? null : tmp_3_0.dirty) || ((tmp_3_0 = ctx.productForm.get(\"price\")) == null ? null : tmp_3_0.touched)));\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngIf\", ctx.imagePathList[0]);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.Category);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.productForm.get(\"categoryId\")) == null ? null : tmp_6_0.invalid) && (((tmp_6_0 = ctx.productForm.get(\"categoryId\")) == null ? null : tmp_6_0.dirty) || ((tmp_6_0 = ctx.productForm.get(\"categoryId\")) == null ? null : tmp_6_0.touched)));\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.application);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.productForm.get(\"applicationTypeId\")) == null ? null : tmp_8_0.invalid) && (((tmp_8_0 = ctx.productForm.get(\"applicationTypeId\")) == null ? null : tmp_8_0.dirty) || ((tmp_8_0 = ctx.productForm.get(\"applicationTypeId\")) == null ? null : tmp_8_0.touched)));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"disabled\", ctx.productForm.invalid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", \"/displayproductlist\");\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i3.RouterLink, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i7.AlertComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","Product","HttpHeaders","i0","CreateProductComponent","constructor","formBuilder","productServiceService","router","userserviceService","http","getuserloginstatus","isadmin","navigate","productlist","getProduct","Category","getcategory","application","getapplication","ngOnInit","productForm","group","name","required","price","min","max","shortDesc","description","categoryId","applicationTypeId","onFileChange","event","file","target","files","OnUploadFile","console","log","formData","FormData","append","headers","post","subscribe","response","error","onSubmit","valid","productName","controls","value","isDuplicate","some","product","Name","toLowerCase","onAlertOpen","setTimeout","onAlertClose","id","imagePathList","Addproduct","isAlert","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\158590\\OneDrive - Arrow Electronics, Inc\\Desktop\\E-Marble_Inquiry\\src\\app\\admin\\create-product\\create-product.component.ts","C:\\Users\\158590\\OneDrive - Arrow Electronics, Inc\\Desktop\\E-Marble_Inquiry\\src\\app\\admin\\create-product\\create-product.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ProductServiceService } from 'src/app/Services/product-service.service';\nimport { Applicationtype } from 'src/app/data/applicationtype';\nimport { Product } from 'src/app/data/product';\nimport { UserserviceService } from '../../Services/userservices.service';\nimport { Category } from '../../data/category';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpHeaders } from '@angular/common/http';\n\n@Component({\n  selector: 'app-create-product',\n  templateUrl: './create-product.component.html',\n  styleUrls: ['./create-product.component.css']\n})\nexport class CreateProductComponent implements OnInit {\n  public productForm: any;\n  public id: number = 0;\n  public imagePathList: string[] = [];\n  public Category: Category[] = [];\n  public application: Applicationtype[] = [];\n  public product: Product | undefined;\n  public productname?: string = \"\";\n  public productlist: Product[] = [];\n  loading: boolean = false;\n  file?: File;\n  isAlert:boolean= false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private productServiceService: ProductServiceService,\n    public router: Router,\n    public userserviceService: UserserviceService,\n    private http: HttpClient // Inject HttpClient module here\n  ) {\n    if (!userserviceService.getuserloginstatus() && !userserviceService.isadmin) {\n      router.navigate(['/Login']);\n    }\n    this.productlist = productServiceService.getProduct();\n    this.Category = productServiceService.getcategory();\n    this.application = productServiceService.getapplication();\n  }\n  \n\n  ngOnInit(): void {\n    this.productForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      price: ['', [Validators.required, Validators.min(1), Validators.max(2147483647)]],\n      shortDesc: [''],\n      description: [''],\n      categoryId: ['', Validators.required],\n      applicationTypeId: ['', Validators.required]\n    });\n  }\n\n  onFileChange(event: any) {\n    this.file = event.target.files[0];\n  }\n\n  \n  OnUploadFile() {\n    console.log('upload.....');\n    if (this.file) {\n      const formData = new FormData();\n      formData.append('file', this.file);\n  \n      const headers = new HttpHeaders();\n      headers.append('Content-Type', 'multipart/form-data');\n  \n      this.http\n        .post('assets', formData, { headers })\n        .subscribe(\n          (response: any) => {\n            console.log('File uploaded successfully');\n            // Handle the response if required\n          },\n          (error: any) => {\n            console.error('Error uploading file:', error);\n            // Handle the error if required\n          }\n        );\n    }\n  }\n  \n\n  \n  onSubmit() {\n    if (this.productForm.valid) {\n      const productName = this.productForm.controls['name'].value;\n      const isDuplicate = this.productlist.some(\n        (product) =>\n          product.Name?.toLowerCase() === productName.toLowerCase()\n      );\n      if (isDuplicate) {\n        this.onAlertOpen();\n        setTimeout(()=>{\n          this.onAlertClose();\n        },3000)\n      } else {\n        this.OnUploadFile(); // Upload the file before adding the product\n        const product = new Product(\n          this.id,\n          productName,\n          this.productForm.controls['shortDesc'].value,\n          this.productForm.controls['price'].value,\n          this.imagePathList[0],\n          this.productForm.controls['categoryId'].value,\n          this.productForm.controls['applicationTypeId'].value,\n          this.productForm.controls['description'].value\n        );\n  \n        this.productServiceService.Addproduct(product);\n        console.log(this.productServiceService.getProduct());\n        this.router.navigate(['/displayproductlist']);\n      }\n    }\n  }\n  onAlertClose(){\n    this.isAlert=false;\n  }\n  onAlertOpen(){\n    this.isAlert=true;\n  }\n}\n","<div class=\"container m-4\">\n  <app-alert *ngif=\"isAlert\"[type]=\"'alert-warning'\" (onClose)=\"onAlertClose()\">\n    <strong>Info!</strong>This alert box could indicate a neutral change\n  </app-alert>\n  <form [formGroup]=\"productForm\" (ngSubmit)=\"onSubmit()\">\n    <div class=\"border p-3\">\n      <div class=\"form-group row\">\n        <h2 class=\"text-center text-info pl-3\">Create Product</h2>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-8\">\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <p class=\"text-danger\"></p>\n            </div>\n            <div class=\"col-8\"></div>\n            <div class=\"col-4\">\n              <label for=\"Product_Name\">Name</label>\n            </div>\n            <div class=\"col-8\">\n              <input class=\"form-control\" type=\"text\" id=\"Product_Name\" formControlName=\"name\" />\n              <span class=\"text-danger field-validation-valid\" *ngIf=\"productForm.get('name')?.invalid && (productForm.get('name')?.dirty || productForm.get('name')?.touched)\">\n                The Name field is required.\n              </span>\n            </div>\n          </div>\n          <br />\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_Price\">Price</label>\n            </div>\n            <div class=\"col-8\">\n              <input class=\"form-control\" type=\"text\" id=\"Product_Price\" formControlName=\"price\" />\n              <span class=\"text-danger field-validation-valid\" *ngIf=\"productForm.get('price')?.invalid && (productForm.get('price')?.dirty || productForm.get('price')?.touched)\">\n                The field Price must be a number between 1 and 2147483647.\n              </span>\n            </div>\n          </div>\n          <br />\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_ShortDesc\">ShortDesc</label>\n            </div>\n            <div class=\"col-8\">\n              <input class=\"form-control\" type=\"text\" id=\"Product_ShortDesc\" formControlName=\"shortDesc\" />\n            </div>\n          </div>\n          <br />\n          \n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_Description\">Description</label>\n            </div>\n            <div class=\"col-8\">\n              <textarea class=\"form-control summernote\" id=\"Product_Description\" formControlName=\"description\"></textarea>\n            </div>\n          </div>\n          <br />\n        \n\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_Image\">Image</label>\n            </div>\n            <div class=\"col-8\">\n              <input type=\"file\" (change)=\"onFileChange($event)\" name=\"files\" id=\"uploadBox\" multiple class=\"form-control\" />\n              <br />\n              <img [src]=\"imagePathList[0]\" alt=\"Selected Image\" *ngIf=\"imagePathList[0]\" style=\"max-width: 200px; max-height: 200px;\" />\n            </div>\n          </div>\n          \n          <br />\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_CategoryId\">Category Type</label>\n            </div>\n            <div class=\"col-8\">\n              <select class=\"form-control\" id=\"Product_CategoryId\" formControlName=\"categoryId\">\n                <option disabled selected>--Select Category--</option>\n                <option *ngFor=\"let cat of Category\" [value]=\"cat.Id\">{{ cat.CategoryName }}</option>\n              </select>\n              <span class=\"text-danger field-validation-valid\" *ngIf=\"productForm.get('categoryId')?.invalid && (productForm.get('categoryId')?.dirty || productForm.get('categoryId')?.touched)\">\n                The Category Type field is required.\n              </span>\n            </div>\n          </div>\n          <br />\n          <div class=\"form-group row\">\n            <div class=\"col-4\">\n              <label for=\"Product_ApplicationTypeId\">Application Type</label>\n            </div>\n            <div class=\"col-8\">\n              <select class=\"form-control\" id=\"Product_ApplicationTypeId\" formControlName=\"applicationTypeId\">\n                <option disabled selected>--Select Application Type--</option>\n                <option *ngFor=\"let app of application\" [value]=\"app.Id\">{{ app.ApplicationName }}</option>\n              </select>\n              <span class=\"text-danger field-validation-valid\" *ngIf=\"productForm.get('applicationTypeId')?.invalid && (productForm.get('applicationTypeId')?.dirty || productForm.get('applicationTypeId')?.touched)\">\n                The Application Type field is required.\n              </span>\n            </div>\n          </div>\n          <br />\n          <div class=\"form-group row\">\n            <div class=\"col-8 offset-4 row\">\n              <div class=\"col\">\n                <input type=\"submit\" [disabled]=\"productForm.invalid\" class=\"btn btn-primary w-100\" value=\"Create\" />\n              </div>\n              <div class=\"col\">\n                <a class=\"btn btn-success w-100\" [routerLink]=\"'/displayproductlist'\">\n                  <i class=\"fas fa-sign-out-alt\"></i> Back\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-4\"></div>\n      </div>\n    </div>\n  </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}